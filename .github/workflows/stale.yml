name: Stale

on:
  schedule:
    # Run daily at 00:00 UTC
    - cron: '0 0 * * *'
  workflow_dispatch:

permissions:
  contents: read
  issues: write
  pull-requests: write

jobs:
  stale:
    name: Mark Stale Issues and PRs
    runs-on: ubuntu-latest
    steps:
      - name: Mark stale issues and PRs
        uses: actions/stale@v9
        with:
          stale-issue-message: |
            This issue has been automatically marked as stale because it has not had
            recent activity. It will be closed if no further activity occurs.

            Thank you for your contributions.
          stale-pr-message: |
            This pull request has been automatically marked as stale because it has not had
            recent activity. It will be closed if no further activity occurs.

            Thank you for your contributions.
          days-before-stale: 60
          days-before-close: 14
          exempt-issue-labels: pinned, security, good first issue, help wanted
          exempt-pr-labels: pinned, security, work-in-progress
          stale-issue-label: stale
          stale-pr-label: stale
          delete-branch: true

  remove-stale:
    name: Remove Stale Label on Activity
    runs-on: ubuntu-latest
    steps:
      - name: Remove stale label
        uses: actions/stale@v9
        with:
          days-before-stale: -1
          days-before-close: -1
          remove-stale-when-updated: true
          repo-token: ${{ secrets.GITHUB_TOKEN }}
